<script>
    import { tabSettings, proxySettings, marketPlaceSettings, Settings } from "@utils/settings.ts";
    // This loads the settings in a nice way
    tabSettings.cloakTab(localStorage.getItem(Settings.TabSettings.tabCloak) as string || "default");
    proxySettings.changeProxy(localStorage.getItem(Settings.ProxySettings.proxy) as string || "automatic");
    proxySettings.openIn(localStorage.getItem(Settings.ProxySettings.openIn) as string || "embed");
    proxySettings.setSearchEngine(localStorage.getItem(Settings.ProxySettings.searchEngine) as string || "ddg");
    proxySettings.setWispURL(localStorage.getItem(Settings.ProxySettings.wispServerURL) as string || "default");
    proxySettings.setTransport(localStorage.getItem(Settings.ProxySettings.transport) as string || "epoxy");
    marketPlaceSettings.changeTheme(false, undefined, localStorage.getItem(Settings.AppearanceSettings.video) as string, localStorage.getItem(Settings.AppearanceSettings.image) as string);
    document.addEventListener("astro:after-swap", function() {
        tabSettings.cloakTab(localStorage.getItem(Settings.TabSettings.tabCloak) as string || "default");
        //marketPlaceSettings.changeTheme(false);
    });
</script>
